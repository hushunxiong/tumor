<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wonders.health.tumor.common.dao.CancerDicAreaDao">

    <sql id="DicAreaColumns">
        a.ccode AS "ccode",a.cname AS "cname",a.cparent AS "cparent",a.clevel AS "clevel",a.yljgdm AS "yljgdm",a.helpcode AS "helpcode",a.yxbz AS "yxbz"
    </sql>

    <select id="get" resultType="com.wonders.health.tumor.common.entity.CancerDicArea">
        SELECT
        <include refid="DicAreaColumns"/>
        FROM CANCER_DIC_AREA a
        WHERE a.ccode = #{ccode}
    </select>

    <select id="findParent" resultType="com.wonders.health.tumor.common.entity.CancerDicArea">
        SELECT
        <include refid="DicAreaColumns"/>
        FROM CANCER_DIC_AREA a
        WHERE a.cparent = #{code}
    </select>

    <select id="findAreas" resultType="com.wonders.health.tumor.common.entity.CancerDicArea">
        SELECT
        <include refid="DicAreaColumns"/>
        FROM CANCER_DIC_AREA a
        <where>
            a.yxbz = '1' AND a.clevel = #{level}
            <if test="pcode != null and pcode !=''">
                AND a.cparent=#{pcode}
            </if>
        </where>
        ORDER BY a.ccode
    </select>

    <select id="findAll" resultType="com.wonders.health.tumor.common.entity.CancerDicArea">
        SELECT
        <include refid="DicAreaColumns"/>
        FROM CANCER_DIC_AREA a
        <where>

        </where>
    </select>
    <!-- 分页模块 -->
    <sql id="pageFromAndWhere">
        FROM CANCER_DIC_AREA a
        <where>

        </where>
    </sql>

    <select id="pageCount" resultType="java.lang.Integer"
            parameterType="com.wonders.health.tumor.common.model.DataGridSearch">
        select count(1)
        <include refid="pageFromAndWhere"/>
    </select>


    <select id="pageList" resultType="com.wonders.health.tumor.common.entity.CancerDicArea"
            parameterType="com.wonders.health.tumor.common.model.DataGridSearch">
        <choose>
            <when test="startRecord == 0">
                select * from (
            </when>
            <otherwise>
                select * from ( select row_.*, rownum rownum_ from (
            </otherwise>
        </choose>
        select
        <include refid="DicAreaColumns"/>
        <include refid="pageFromAndWhere"/>
        <choose>
            <when test="sortField != null and sortField != '' and sortOrder != '' and sortOrder != ''">
                ORDER BY ${sortField} ${sortOrder}
            </when>
            <otherwise>
            </otherwise>
        </choose>
        <choose>
            <when test="startRecord == 0">
                ) row_ where rownum &lt;= #{pageSize}
            </when>
            <otherwise>
                ) row_ where rownum &lt;= #{endRecord}) where rownum_ &gt; #{startRecord}
            </otherwise>
        </choose>
    </select>

    <insert id="insert">
        INSERT INTO CANCER_DIC_AREA(
        ccode,cname,cparent,clevel,yljgdm,helpcode,yxbz
        ) VALUES (
        #{ccode},#{cname},#{cparent},#{clevel},#{yljgdm},#{helpcode},#{yxbz}
        )
    </insert>

    <update id="update">
        UPDATE CANCER_DIC_AREA SET
        ccode = #{ccode},cname = #{cname},cparent = #{cparent},clevel = #{clevel},yljgdm = #{yljgdm},helpcode = #{helpcode},yxbz = #{yxbz}
        WHERE ccode = #{ccode}
    </update>

    <delete id="delete">
        DELETE FROM CANCER_DIC_AREA
        WHERE ccode = #{ccode}
    </delete>

</mapper>